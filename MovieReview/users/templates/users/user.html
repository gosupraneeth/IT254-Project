{% extends 'users/layout.html' %}

{% load static %}
{% block head %}
<title>Movie Reviews</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href='https://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Georgia' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Montserrat\Alternates' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=PT\Sans' rel='stylesheet'>


<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

<script>
    function myFunction() {
        var dots;
        var moreText;
        var btnText;
        var parent;
        document.querySelectorAll('.myBtn').forEach((button) => {
            button.onclick = function () {
                parent = this.parentNode;
                dots = parent.getElementsByClassName('dots')[0];
                moreText = parent.getElementsByClassName("more")[0];
                btnText = parent.getElementsByClassName("myBtn")[0];

                if (dots.style.display === "none") {
                    dots.style.display = "inline";
                    btnText.innerHTML = "Read more";
                    moreText.style.display = "none";
                } else {
                    dots.style.display = "none";
                    btnText.innerHTML = "Read less";
                    moreText.style.display = "inline";
                }
            }
        });
    }
</script>
<style>
    .nav-link {
        margin: .5rem 1rem;
        padding: 0 .5rem 0 .5rem;
    }

    .btn-danger {
        color: #fff;
        float: right;
        background-color: #dc3545;
        border-color: #dc3545;
        margin: 1%;
    }
</style>

<script>
    if (!localStorage.getItem('darktheme')) {

        // If not, set the counter to 0 in local storage
        localStorage.setItem('darktheme', false);
    }
    document.addEventListener('DOMContentLoaded', () => {
        console.log(localStorage.getItem('darktheme'));
        if (localStorage.getItem('darktheme') == 'true') {
            document.getElementById('flexSwitchCheckChecked').checked = true;
            localStorage.setItem('darktheme', false);
        } else {
            document.getElementById('flexSwitchCheckChecked').checked = false;
            localStorage.setItem('darktheme', true);
        }
        //var element = document.body;
        //element.classList.add("dark-mode");
        changeTheme();
    });

    function changeTheme() {
        let theme = localStorage.getItem('darktheme');
        var setbool;
        if (theme == "true") {
            setbool = false;
            var element = document.body;
            element.classList.add("dark-mode");
        }
        else {
            setbool = true;
            var element = document.body;
            element.classList.remove("dark-mode");
        }
        localStorage.setItem('darktheme', setbool);
    }
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }

    function sidenav(x) {
        if (x.matches) {
            closeNav();
        }

    }

    var x = window.matchMedia("(min-width: 1000px)")
    sidenav(x)
    x.addListener(sidenav)
</script>
<link rel="stylesheet" href="{% static 'users/home.css' %}">
<link rel="stylesheet" href="{% static 'users/chatbot.css' %}">
<link rel="stylesheet" href="{% static 'users/signin.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
<link href='https://fonts.googleapis.com/css?family=Comfortaa' rel='stylesheet'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.0/anime.min.js">
</script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        var current = null;
        document.querySelector('.username').addEventListener('focus', function () {
            if (current) current.pause();
            current = anime({
                targets: 'path',
                strokeDashoffset: {
                    value: 0,
                    duration: 700,
                    easing: 'easeOutQuart'
                },
                strokeDasharray: {
                    value: '443 1386',
                    duration: 700,
                    easing: 'easeOutQuart'
                }
            });
        });
        document.querySelector('.password').addEventListener('focus', function (e) {
            if (current) current.pause();
            current = anime({
                targets: 'path',
                strokeDashoffset: {
                    value: -555,
                    duration: 700,
                    easing: 'easeOutQuart'
                },
                strokeDasharray: {
                    value: '440 1386',
                    duration: 700,
                    easing: 'easeOutQuart'
                }
            });
        });
        document.querySelector('.login_submit').addEventListener('focus', function (e) {
            if (current) current.pause();
            current = anime({
                targets: 'path',
                strokeDashoffset: {
                    value: -1300,
                    duration: 500,
                    easing: 'easeOutQuart'
                },
                strokeDasharray: {
                    value: '420 1786',
                    duration: 700,
                    easing: 'easeOutQuart'
                }
            });
        });
    });
</script>
{% endblock %}

{% block body %}


<div style="width: 97%;height:100%;display: inline-flex; flex-direction: row; margin: 1%;">
    <div class="sidebar">
        <h2 style="font-family: Orbitron;">Language</h2>
        <p><button type="submit" class="lang_btn"> Hindi </button></p>
        <p><button type="submit" class="lang_btn"> Marathi</button></p>
        <p><button type="submit" class="lang_btn"> English </button></p>
        <p><button type="submit" class="lang_btn"> French </button></p>
        <p><button type="submit" class="lang_btn"> German</button></p>
        <p><button type="submit" class="lang_btn"> Spanish </button></p>
        <p><button type="submit" class="lang_btn"> Russian </button></p>
        <p><button type="submit" class="lang_btn"> Italian </button></p>
        <p><button type="submit" class="lang_btn"> Japanese</button></p>
        <p><button type="submit" class="lang_btn"> Chinese</button></p>
    </div>
    <div class="content">
        <div class="top-bar">
            <span class="threeline" style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; </span>
            <h1>Hello {{request.user.username}}!</h1>
            <input type="text" id="search" name="search" placeholder="Search..">
            <a class="btn btn-danger me-2" type="button" href="{% url 'logout' %}">Logout</a>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" checked
                    onclick="changeTheme();">
                <label class="form-check-label" for="flexSwitchCheckChecked">Dark Mode</label>
            </div>
        </div>
        <nav class="big-nav navbar navbar-expand-lg navbar-dark ">
            <div class="container-fluid" style="display: inline-flex; flex-direction: row; flex-wrap: nowrap;">
                <a class="navbar-brand" href="#" style="font-family: Orbitron;">GERNE</a>
                <div class="navbar-nav">
                    <div class="menu" id="menu">
                        <a class="nav-link" href="#">Action</a>
                        <a class="nav-link" href="#">Adventure</a>
                        <a class="nav-link " href="#">DarkMovies</a>
                        <a class="nav-link" href="#">Documentaries</a>
                        <a class="nav-link" href="#">Drama</a>
                        <a class="nav-link " href="#">Fantasy</a>
                        <a class="nav-link" href="#">Musical</a>
                        <a class="nav-link" href="#">Romance</a>
                        <a class="nav-link " href="#">Scifi</a>
                        <a class="nav-link " href="#">Thriller</a>
                        <a class="nav-link " href="#">Comedy</a>
                        <a class="nav-link " href="#">History</a>
                    </div>
                </div>
            </div>
        </nav>



        <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <p><button type="submit" class="lang_btn"> Hindi </button></p>
            <p><button type="submit" class="lang_btn"> Marathi</button></p>
            <p><button type="submit" class="lang_btn"> English </button></p>
            <p><button type="submit" class="lang_btn"> French </button></p>
            <p><button type="submit" class="lang_btn"> German</button></p>
            <p><button type="submit" class="lang_btn"> Spanish </button></p>
            <p><button type="submit" class="lang_btn"> Russian </button></p>
            <p><button type="submit" class="lang_btn"> Italian </button></p>
            <p><button type="submit" class="lang_btn"> Japanese</button></p>
            <p><button type="submit" class="lang_btn"> Chinese</button></p>
        </div>
        {% include 'users/card_layout.html' %}

        {% include 'users/card_layout.html' %}

        {% include 'users/card_layout.html' %}

        {% include 'users/card_layout.html' %}

    </div>
</div>


<div class="chat-container" style="justify-content: right;"></div>
<div class="chat_icon">
    <i class="fa fa-comments" aria-hidden="true"></i>
</div>
<script src="https://npm-scalableminds.s3.eu-central-1.amazonaws.com/@scalableminds/chatroom@master/dist/Chatroom.js">
</script>
<script type="text/javascript">
    var chatroom = new window.Chatroom({
        host: "http://localhost:5005",
        title: "Movie suggestion bot",
        container: document.querySelector(".chat-container"),
        welcomeMessage: "Hi {{ student.stud_name }}, I am Movie suggesting bot. How may I help you?",
        speechRecognition: "en-US",
    });
    chatroom.openChat();
</script>
<script>
    var toggle = true;
    document.querySelector('.chat_icon').onclick = () => {
        var chatroom = document.querySelector('.chatroom');
        if (toggle == true) {
            chatroom.classList.add('active');
            toggle = false;
        }
        else {
            chatroom.classList.remove('active');
            toggle = true;
        }

    };
</script>
{% endblock %}

</html>